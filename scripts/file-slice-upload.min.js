!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fileSliceUpload=e():t.fileSliceUpload=e()}(self,(function(){return(()=>{var t={130:(t,e,n)=>{"use strict";n.r(e),n.d(e,{create:()=>v,default:()=>g});var r={};function i(t,e){return Object.is(t,e)}function o(t,e){for(;Object.getPrototypeOf(t);)if((null==(t=Object.getPrototypeOf(t))?void 0:t.constructor)===e)return!0;return!1}function u(t){return!!Number.isInteger(t)}function a(t,e){if(!o(e,Array))return!1;if(!u(t))return!1;var n=e[0],r=e[1];return n<=t&&r>=t}function f(t){return!!t}function s(t,e){if(Object.is(t,e))return!0;if("object"!=typeof t||"object"!=typeof e)return!1;if((null==t?void 0:t.constructor)!==(null==e?void 0:e.constructor))return!1;if([t,e].includes(null))return!1;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every((function(n){return s(t[n],e[n])}))}function c(t,e){return!!e.includes(t)||e.findIndex((function(e){return s(e,t)}))>-1}function l(t){return!!u(t)&&t>0}n.r(r),n.d(r,{equal:()=>i,inRange:()=>a,int:()=>u,ok:()=>f,oneOf:()=>c,positiveInt:()=>l,shallowEq:()=>s,truth:()=>p,typeOf:()=>o});var h=[null,void 0,!1,NaN];function p(t){return!h.includes(t)}var y,d=(y=function(t,e){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},y(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AssertTiny",e}return d(e,t),e}(Error),v=function(t){var e=function(){function t(){var t=this;this.SLIENT=!1,this.NOT=!1,this.value=function(e){return t.VALUE=e,t}}return t.prototype.result=function(t,e,n){if((!t||this.NOT)&&(t||!this.NOT)){var r=e?"".concat(e):"".concat(n," assert error");if(this.SLIENT&&console.warn(new b(r)),!this.SLIENT)throw new b(r)}},Object.defineProperty(t.prototype,"not",{get:function(){return this.NOT=!0,this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slient",{get:function(){return this.SLIENT=!0,this},enumerable:!1,configurable:!0}),t}(),n=Object.getPrototypeOf(new e),i=Object.assign(t||{},r),o=Object.keys(i).reduce((function(e,n){var r,i,o,u="is".concat((void 0===i&&(i=0),void 0===o&&(o=1),"".concat((r=n).slice(i,o).toUpperCase()).concat(r.slice(o))));return e[u]=function(e,r){var i=this;t[n](i.VALUE,e)?i.result(!0,r,u):i.result(!1,r,u)},e}),{});return Object.assign(n,o),function(t){return(new e).value(t)}};const g=v({})},205:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Emitter:()=>i,default:()=>o});var r=n(130),i=function(){var t=this;this.eventBus={},this.on=function(e,n){(0,r.default)(e).isTypeOf(String,"eventName must be a string"),(0,r.default)(n).isTypeOf(Function,"callback must be a funtion");var i=t.eventBus;return Array.isArray(i[e])?i[e].push(n):i[e]=[n],t},this.emit=function(e,n){(0,r.default)(e).isTypeOf(String,"eventName must be a string");var i=t.eventBus;Array.isArray(i[e])&&i[e].forEach((function(t){return t(n)}))},this.off=function(e,n){(0,r.default)(e).isTypeOf(String,"eventName must be a string"),(0,r.default)(n).isTypeOf(Function,"callback must be a funtion");var i=t.eventBus;Array.isArray(i[e])&&(i[e]=i[e].filter((function(t){return n!==t})))},this.once=function(e,n){(0,r.default)(e).isTypeOf(String,"eventName must be a string"),(0,r.default)(n).isTypeOf(Function,"callback must be a funtion");var i=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];n.apply(void 0,r),t.off(e,i)};t.on(e,i)}};const o=i},322:t=>{t.exports=function(t){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+e[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+e[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+e[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+e[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+e[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+e[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+e[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+e[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+e[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+e[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+e[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+e[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+e[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+e[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+e[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+e[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+e[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+e[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+e[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+e[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+e[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+e[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+e[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+e[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+e[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+e[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+e[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+e[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+e[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+e[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+e[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+e[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+e[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+e[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+e[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+e[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+e[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+e[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+e[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+e[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+e[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+e[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+e[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+e[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+e[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+e[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+e[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+e[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+e[9]-343485551|0)<<21|r>>>11)+i|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=i+t[2]|0,t[3]=o+t[3]|0}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function i(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function o(t){var e,i,o,u,a,f,s=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)n(c,r(t.substring(e-64,e)));for(i=(t=t.substring(e-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<i;e+=1)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return u=(u=8*s).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(u[2],16),f=parseInt(u[1],16)||0,o[14]=a,o[15]=f,n(c,o),c}function u(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function a(t){var e;for(e=0;e<t.length;e+=1)t[e]=u(t[e]);return t.join("")}function f(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function s(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return a(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(e,n){var r,i,o,u,a=this.byteLength,f=t(e,a),s=a;return undefined!==n&&(s=t(n,a)),f>s?new ArrayBuffer(0):(r=s-f,i=new ArrayBuffer(r),o=new Uint8Array(i),u=new Uint8Array(this,f,r),o.set(u),i)}}(),c.prototype.append=function(t){return this.appendBinary(f(t)),this},c.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,i=this._buff.length;for(e=64;e<=i;e+=64)n(this._hash,r(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},c.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(o,i),n=a(this._hash),t&&(n=s(n)),this.reset(),n},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(t,e){var r,i,o,u=e;if(t[u>>2]|=128<<(u%4<<3),u>55)for(n(this._hash,t),u=0;u<16;u+=1)t[u]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,t[14]=i,t[15]=o,n(this._hash,t)},c.hash=function(t,e){return c.hashBinary(f(t),e)},c.hashBinary=function(t,e){var n=a(o(t));return e?s(n):n},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(t){var e,r,o,u,a,f=(r=this._buff.buffer,o=t,u=!0,(a=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),a.set(new Uint8Array(o),r.byteLength),u?a:a.buffer),s=f.length;for(this._length+=t.byteLength,e=64;e<=s;e+=64)n(this._hash,i(f.subarray(e-64,e)));return this._buff=e-64<s?new Uint8Array(f.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r[e]<<(e%4<<3);return this._finish(o,i),n=a(this._hash),t&&(n=s(n)),this.reset(),n},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var t,e=c.prototype.getState.call(this);return e.buff=(t=e.buff,String.fromCharCode.apply(null,new Uint8Array(t))),e},c.ArrayBuffer.prototype.setState=function(t){return t.buff=function(t,e){var n,r=t.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=t.charCodeAt(n);return e?o:i}(t.buff,!0),c.prototype.setState.call(this,t)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(t,e){var r=a(function(t){var e,r,o,u,a,f,s=t.length,c=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=s;e+=64)n(c,i(t.subarray(e-64,e)));for(r=(t=e-64<s?t.subarray(e-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<r;e+=1)o[e>>2]|=t[e]<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(n(c,o),e=0;e<16;e+=1)o[e]=0;return u=(u=8*s).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(u[2],16),f=parseInt(u[1],16)||0,o[14]=a,o[15]=f,n(c,o),c}(new Uint8Array(t)));return e?s(r):r},c}()},776:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{f(r.next(t))}catch(t){o(t)}}function a(t){try{f(r.throw(t))}catch(t){o(t)}}function f(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}f((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=o(n(665)),a=o(n(130)),f=o(n(205)),s=o(n(951));e.default=function(t){void 0===t&&(t=1048576);var e=this;this.chunkSize=t,this.event=new f.default,this.on=function(t,n){return(0,a.default)(n).isTypeOf(Function,"handler expect function type"),e.event.on(t,n),e},this.off=function(t,n){return(0,a.default)(n).isTypeOf(Function,"handler expect function type"),e.event.off(t,n),e},this.setFile=function(t){return e.file=t,e},this.getFile=function(){return e.file},this.setAjax=function(t){return e.ajax=t,e},this.start=function(){return r(e,void 0,void 0,(function(){var t,e,n,r,o,a,f,c,l,h,p,y;return i(this,(function(i){switch(i.label){case 0:return e=(t=this).file,n=t.ajax,r=t.chunkSize,o=t.event,a=(0,s.default)(e,r,o),f=a.startCompute,c=a.cancelCompute,l=(0,u.default)(e,r,n,o),h=l.start,p=l.cancel,this.cancelUpload=function(){c(),p()},o.emit("start",{file:e,chunkSize:r}),[4,f()];case 1:return"string"==typeof(y=i.sent())&&h(y),[2]}}))}))},this.cancel=function(){var t=e,n=t.cancelUpload,r=t.event,i=t.file,o=t.chunkSize;null==n||n(),r.emit("cancel",{file:i,chunkSize:o})}}},607:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.FileSliceUpload=void 0;var o=i(n(776));r(e,n(776),"default","FileSliceUpload"),e.default=function(t){return new o.default(t)}},951:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{f(r.next(t))}catch(t){o(t)}}function a(t){try{f(r.throw(t))}catch(t){o(t)}}function f(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}f((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=o(n(322)),a=o(n(11)),f=o(n(205));e.default=function(t,e,n){void 0===n&&(n=new f.default);var o=new u.default.ArrayBuffer,s=(0,a.default)(t,e,!0),c=s.getChunk,l=s.chunkNums,h=!1;return{startCompute:function(){return r(void 0,void 0,void 0,(function(){return i(this,(function(t){return[2,new Promise((function(t){h=!1;var e=new FileReader,r=0;e.onload=function(i){if(h)return t(!1);var u=i.target.result;o.append(u),n.emit("progress",{done:++r,all:l,type:"md5"}),r<l?e.readAsArrayBuffer(c(r)):t(o.end())},e.readAsArrayBuffer(c(r))}))]}))}))},cancelCompute:function(){return h=!0}}}},11:(t,e)=>{"use strict";e.__esModule=!0;var n=function(t,e){return"".concat(t.name,"-").concat(e)};e.default=function(t,e,r,i){return void 0===r&&(r=!1),{getChunk:function(o){var u=t.slice(o*e,(o+1)*e);return r?u:new File([u],(i||n)(t,o),{type:t.type})},chunkNums:Math.ceil(t.size/e)}}},665:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function u(t){try{f(r.next(t))}catch(t){o(t)}}function a(t){try{f(r.throw(t))}catch(t){o(t)}}function f(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,a)}f((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=o(n(11)),a=o(n(205));e.default=function(t,e,n,o){void 0===o&&(o=new a.default);var f=(0,u.default)(t,e,!1),s=f.getChunk,c=f.chunkNums,l=0,h=!1;return{start:function(e){return r(this,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:h=!1,i.label=1;case 1:return l<c?(r=s(l)).size?[4,n({chunk:r,index:l,all:c,md5:e})]:[2]:[3,3];case 2:return i.sent()?(o.emit("chunk-uploaded",{chunk:r,file:t,index:l,md5:e}),h?(o.emit("cancel",{chunk:r,file:t,index:l}),[2]):(l++,o.emit("progress",{done:l,all:c,type:"upload"}),[3,1])):[2,o.emit("error",{chunk:r,file:t,index:l})];case 3:return o.emit("finish",{file:t,md5:e}),[2]}}))}))},cancel:function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){return h=!0,[2]}))}))}}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r=n(607);return r.default})()}));